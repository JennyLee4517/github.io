---
title: "Oracle 3ì¼ì°¨ : ë‚´ìž¥í•¨ìˆ˜"
date: 2019-11-20 12:30:00 -0400
categories: SQL


---

## ìˆ«ìží•¨ìˆ˜

| í•¨ìˆ˜          | ë°˜í™˜ê°’                                   |
| ------------- | ---------------------------------------- |
| abs(n)        | ì ˆëŒ“ê°’                                   |
| ceil(n)       | ì˜¬ë¦¼                                     |
| floor(n)      | ë‚´ë¦¼                                     |
| mod(m, n)     | mì„ nìœ¼ë¡œ ë‚˜ëˆˆ ë‚˜ë¨¸ì§€                    |
| power(m, n)   | mì˜ nìŠ¹                                  |
| round(n, [m]) | nê°’ì˜ ë°˜ì˜¬ë¦¼, mì€ ì†Œìˆ«ì ì•„ëž«ìžë¦¬ìˆ˜       |
| trunc(n, m)   | nê°’ì„ m ì†Œìˆ«ì  ì•„ëž˜ë¡œ ë‚´ë¦¼               |
| sign(n)       | ì–‘ìˆ˜/ìŒìˆ˜/0 ì‹ë³„í•¨ì–‘ìˆ˜>1 , ìŒìˆ˜>-1 , 0>0 |

### ðŸ£ ì‹¤ìŠµí•˜ê¸°

```sql
SELECT ROUND(345670, -2) FROM DUAL;
SELECT sum(salary), floor(avg(salary)) FROM employees;
SELECT max(salary), min(salary) FROM employees;
SELECT job_id, sum(salary), floor(avg(salary)) FROM employees ORDER BY 3;
```

## ë¬¸ìžì—´ í•¨ìˆ˜

| í•¨ìˆ˜                      | ë°˜í™˜ê°’                                                       |
| ------------------------- | ------------------------------------------------------------ |
| concat('ë¬¸ìž1', 'ë¬¸ìž2')  | ë‘ ë¬¸ìžë¥¼ ë”í•˜ì—¬ ì¶œë ¥                                        |
| lower(char)               | ëª¨ë‘ ì†Œë¬¸ìžë¡œ ë³€í™˜                                           |
| upper(char)               | ëª¨ë‘ ëŒ€ë¬¸ìžë¡œ ë³€í™˜                                           |
| lpad(char1, n, [char2])   | ì™¼ìª½ì— ë¬¸ìžì—´ì„ ë¼ì›Œë„£ëŠ” ì—­í• ì„ í•¨(nì€ ì „ì²´ ê¸¸ì´)            |
| rpad(char1, n, [char2])   | ì˜¤ë¥¸ìª½ì— ë¬¸ìžì—´ì„ ë¼ì›Œë„£ëŠ” ì—­í• ì„ í•¨(nì€ ì „ì²´ ê¸¸ì´)          |
| substr(char, m, [n])      | charì—ì„œ më²ˆì§¸ë¶€í„° nê°œì˜ ë¬¸ìžì—´ì„ ì¶”ì¶œ (ì²«ë²ˆì§¸=1)ë§Œì¼ mì´ ìŒìˆ˜ë©´ ë’¤ì—ì„œë¶€í„° ì„¼ë‹¤nìƒëžµì‹œ më²ˆì§¸ë¶€í„° ëê¹Œì§€ ì¶”ì¶œ |
| length(char)              | ê¸¸ì´ ì¶œë ¥                                                    |
| replace(char, str1, str2) | charì—ì„œ str1ì„ str2ë¡œ ì¹˜í™˜                                  |
| instr(str, char, [m, n])  | charê°€ strì— í¬í•¨ëœ ìœ„ì¹˜ë¥¼ ë°˜í™˜/ì—†ì„ê²½ìš°0 / ìžˆì„ê²½ìš° í•´ë‹¹ ì¸ë±ìŠ¤(ì‹œìž‘ì ) ë°˜í™˜ /m, n ìƒëžµì‹œ ì²«ë²ˆì§¸ë¡œ ë‚˜ì˜¤ëŠ” charì˜ ìœ„ì¹˜ ë°˜í™˜ |
| trim(char from str)       | ì•žë’¤ì˜ íŠ¹ì • ë¬¸ìžë¥¼ ì œê±°í•œë‹¤.ì œê±°í•  ë¬¸ìž ë¯¸ê¸°ìž¬ ì‹œ(trim(str)) ê³µë°±ë§Œ ì œê±°ë¨ |

### ðŸ£ ì‹¤ìŠµí•˜ê¸°

```sql
SELECT SUBSTR('have a nice day', -3, 3) FROM DUAL; --dayê°€ ì¶œë ¥ë¨

SELECT hire_date ìž…ì‚¬ì¼, SUBSTR(hire_date, 4, 2)  ìž…ì‚¬ì›” FROM employees;
--hire_dateì˜ í˜•íƒœê°€ yy/mm/ddì´ë¯€ë¡œ ë„¤ë²ˆì§¸ë¶€í„° ë‘ê¸€ìžë¥¼ ì„¸ì£¼ë©´ ìž…ì‚¬ì›”ì´ ì¶œë ¥ë¨\
				
SELECT LENGTH(TRIM(' ' FROM '   have   ')) FROM DUAL; --ì•žë’¤ ê³µë°±ì´ ì œê±°ë¨
SELECT INSTR('miller', 'l', 1, 2) FROM DUAL; 
--ì²«ë²ˆì§¸ ê¸€ìžë¶€í„° lì„ ê²€ìƒ‰í•˜ì—¬ ë‘ë²ˆì§¸ lì˜ ìœ„ì¹˜ë¥¼ ë°˜í™˜í•¨
SELECT INSTR('have a nice day', 'a', -1, 1) FROM DUAL;
--ëì—ì„œ ì²«ë²ˆì§¸ë¡œ 'a'ê°€ ë‚˜ì˜¤ëŠ” ìœ„ì¹˜ë¥¼ ë°˜í™˜í•¨ -> 14
			
SELECT RPAD(SUBSTR('910511-2234113', 1,8),14,'*') FROM DUAL;
--ì£¼ë¯¼ë²ˆí˜¸ ë’·6ìžë¦¬ë¥¼ *ë¡œ ì²˜ë¦¬í•˜ê¸°
```



## ë‚ ì§œ í•¨ìˆ˜

| í•¨ìˆ˜                         | ë°˜í™˜ê°’                                                       |
| ---------------------------- | ------------------------------------------------------------ |
| last_day('yyyy-mm-dd')       | ë‹¬ì˜ ë§ˆì§€ë§‰ ë‚ ì„ êµ¬í•¨                                        |
| add_months('yyyy-mm-dd', m)  | íŠ¹ì • ê°œì›”ìˆ˜ë¥¼ ë”í•œ ë‚ ì§œë¥¼ ê³„ì‚°í•˜ì—¬ ë°˜í™˜(ìŒìˆ˜ë„ ê°€ëŠ¥)         |
| to_char(date, 'format')      | date íƒ€ìž…ì´ë‚˜ number íƒ€ìž…ì„ varchar2 íƒ€ìž…ìœ¼ë¡œ ë³€í™˜           |
| to_date(str)                 | ë¬¸ìžíƒ€ìž…ì„ ë‚ ì§œíƒ€ìž…ìœ¼ë¡œ ë³€í™˜                                 |
| months_between(date1, date2) | date1ê³¼ date2 ì‚¬ì´ì˜ ë‹¬ ìˆ˜ë¥¼ numberíƒ€ìž…ìœ¼ë¡œ ë°˜í™˜ì†Œìˆ«ì  ë‹¬ê³ ë‚˜ì˜¤ë©´ roundë¡œ ì²˜ë¦¬í•˜ìž |
| to_number(str)               | ìˆ«ìží˜•íƒœì˜ ë¬¸ìžíƒ€ìž…ì„ ìˆ«ìžíƒ€ìž…ìœ¼ë¡œ ë³€í™˜(JSì˜ evalê³¼ ë¹„ìŠ·)    |
| next_day(date, str)          | str ì—ëŠ” 'ì›”' ,'í™”',... ë“±ì„ ë„£ëŠ”ë‹¤ ìˆ«ìžë¡œ ì“¸ë•ŒëŠ” ì¼=1       |

### ë‚ ì§œ ì¶œë ¥ í˜•ì‹

| í˜•ì‹ | ì¶œë ¥ê°’         |
| ---- | -------------- |
| yyyy | ë…„ë„í‘œí˜„ 4ìžë¦¬ |
| yy   | ë…„ë„í‘œí˜„ 2ìžë¦¬ |
| mm   | ìˆ«ìž ì›”        |
| mon  | ì•ŒíŒŒë²³ ì›”      |
| day  | ìš”ì¼           |
| dy   | ìš”ì¼ ì•½ìž      |
| dd   | ìˆ«ìž ì¼        |

### ì‹œê°„ ì¶œë ¥ í˜•ì‹

| í˜•ì‹     | ì¶œë ¥ê°’                           |
| -------- | -------------------------------- |
| am, pm   | ì˜¤ì „, ì˜¤í›„ í‘œì‹œ(ì•„ë¬´ê±°ë‚˜ ì¨ë„ë¨) |
| hh, hh12 | ì‹œê°„ (12ì‹œê°„)                    |
| hh24     | ì‹œê°„ (24ì‹œê°„)                    |
| mi       | ë¶„                               |
| ss       | ì´ˆ                               |

### ðŸ£ ì‹¤ìŠµí•˜ê¸°

```sql
SELECT to_char(sysdate, 'yyyy-mm-dd') FROM dual; --2019-11-20
SELECT to_char(sysdate, 'yyyy-mm-dd am hh:mi:ss') FROM dual; --2019-11-20 ì˜¤í›„ 12:30:12
SELECT to_char(sysdate, 'yyyy-mm-dd hh24:mi') FROM dual; --2019-11-20 12:30
SELECT to_char(sysdate, 'yyyy-mm-dd day dy') FROM dual; --2019-11-20 ìˆ˜ìš”ì¼ ìˆ˜
SELECT to_char(sysdate, 'mon') FROM dual; --11ì›”
SELECT to_char(sysdate, 'yy-mm-dd') FROM dual; --19-11-20
		
--'1989-02-20'ì¼ ìƒì˜ ë‚˜ì´ë¥¼ êµ¬í•˜ë¼ (í•œêµ­ ë‚˜ì´)
SELECT to_char(sysdate, 'yyyy')-to_char(to_date('1989-02-20'), 'yyyy')+1 "ë‚˜ì´" FROM dual;
			
--employeesì— hire_dateê°€ ìƒë…„ì›”ì¼ì´ë¼ê³  ì¹˜ê³  ë‚˜ì´êµ¬í•˜ê¸°
SELECT last_name||' '||first_name "ì´ë¦„", to_char(sysdate, 'yyyy')-to_char(hire_date, 'yyyy') "ë‚˜ì´" FROM employees;
```



## ì¡°ê±´í•¨ìˆ˜

| í•¨ìˆ˜ëª…                                                       | ì¶œë ¥ê°’                                |
| ------------------------------------------------------------ | ------------------------------------- |
| greatest(ê°’1, ê°’2, ...)                                      | ê°€ìž¥ í° ê°’ êµ¬í•˜ê¸° (ê°€ë¡œë°©í–¥ë§Œ ê°€ëŠ¥)   |
| least(ê°’1, ê°’2, ...)                                         | ê°€ìž¥ ìž‘ì€ ê°’ êµ¬í•˜ê¸° (ê°€ë¡œë°©í–¥ë§Œ ê°€ëŠ¥) |
| case ì»¬ëŸ¼ëª… when if1 then then1 when if2 then then2 else then3 end | decodeì™€ ê°™ì€ ìš©ë„                    |
| case when ì»¬ëŸ¼ëª…&ì¡°ê±´ then1 when.... end                     | when ì´í•˜ì— ì¡°ê±´ì‹ì„ ì¤„ ìˆ˜ ìžˆë‹¤       |

### ðŸ£ ì‹¤ìŠµí•˜ê¸°

```sql
--ê°ìžì˜ ê³¼ëª©ë“¤ ì¤‘ ìµœê³ ì ìˆ˜ì™€ ìµœì €ì ìˆ˜ë¥¼ êµ¬í•œë‹¤
SELECT name, greatest(java,toeic,script) FROM student;
SELECT name, least(java,toeic,script) FROM student;
```



## ê·¸ë£¹í•¨ìˆ˜

- ê·¸ë£¹í•¨ìˆ˜ëž€ ì—¬ëŸ¬í–‰ ë˜ëŠ” í…Œì´ë¸” ì „ì²´ì— ëŒ€í•˜ì—¬ í•¨ìˆ˜ê°€ ì ìš©ë˜ì–´ í•˜ë‚˜ì˜ ê²°ê³¼ê°’ì„ ê°€ì ¸ì˜¤ê¸° ìœ„í•œ í•¨ìˆ˜ë“¤ì´ë‹¤.

- group by ì ˆì„ ì´ìš©í•˜ì—¬ ê·¸ë£¹ë³„ë¡œ ê²°ê³¼ê°€ ì£¼ì–´ì§€ë„ë¡ í•  ìˆ˜ ìž‡ë‹¤.

- having ì ˆì„ ì‚¬ìš©í•˜ì—¬ ê·¸ë£¹í•¨ìˆ˜ë¥¼ ê°€ì§€ê³  ì¡°ê±´ ë¹„êµë¥¼ í•  ìˆ˜ ìžˆë‹¤.

- ì¼ë°˜ ì¡°ê±´ê³¼ ê·¸ë£¹ì¡°ê±´ì´ ê°™ì´ ë‚˜ì˜¬ ê²½ìš° ìˆœì„œëŠ”: select > where > group by > having > order by

| í•¨ìˆ˜           | ë°˜í™˜ê°’                                                |
| -------------- | ----------------------------------------------------- |
| count(ì»¬ëŸ¼ëª…)  | ê²€ìƒ‰ëœ í–‰ì˜ ìˆ˜ ë°˜í™˜ì»¬ëŸ¼ëª… ëŒ€ì‹  *ì“°ë©´ ì „ì²´í–‰ ê°¯ìˆ˜ ë°˜í™˜ |
| max(ì»¬ëŸ¼ëª…)    | ìµœëŒ“ê°’                                                |
| min(ì»¬ëŸ¼ëª…)    | ìµœì†Ÿê°’                                                |
| avg(ì»¬ëŸ¼ëª…)    | í‰ê· ê°’                                                |
| sum(ì»¬ëŸ¼ëª…)    | í•©ê³„êµ¬í•˜ê¸°                                            |
| stddev(ì»¬ëŸ¼ëª…) | í‘œì¤€íŽ¸ì°¨ êµ¬í•˜ê¸°                                       |

### ðŸ£ ì‹¤ìŠµí•˜ê¸°

```sql
--ì „ê³µë³„ ì¸ì› ìˆ˜ êµ¬í•˜ê¸°
SELECT major ì „ê³µ, COUNT(*) ì „ê³µë³„ì¸ì›ìˆ˜ FROM student GROUP BY major;
	
-- ê° ê³¼ëª©ë³„ ìµœëŒ“ê°’ê³¼ ìµœì†Ÿê°’ì„ êµ¬í•˜ë¼
SELECT max(java) ìžë°”ìµœê³ ì , min(java) ìžë°”ìµœì €ì  FROM student;
			
-- ê° ì „ê³µë³„ë¡œ ê° ê³¼ëª©ì˜ ìµœê³ ì ì„ êµ¬í•˜ë¼
SELECT major ,max(java) ìžë°”ìµœê³ ì , max(toeic) í† ìµìµœê³ ì , max(script) ìŠ¤í¬ë¦½íŠ¸ìµœê³ ì  FROM student GROUP BY major;
			
--ê° ì „ê³µë³„ í‰ê· ë‚˜ì´ êµ¬í•˜ê¸°
SELECT major,round(avg(age)) í‰ê· ë‚˜ì´ FROM student GROUP BY major;

SELECT job_id ì§ì—… max(salary) ìµœëŒ€ì—°ë´‰, min(salary) ìµœì†Œì—°ë´‰ FROM employees GROUP BY job_id;
SELECT department_id, sum(salary) FROM employees WHERE department_id IN(30,50,60,100) GROUP BY department_id HAVING sum(salary)>=90000 ORDER BY 1;
```

