---
title: "Oracle 4ì¼ì°¨ : ì¡°ì¸, ì œì•½ì¡°ê±´, ì„œë¸Œì¿¼ë¦¬"
date: 2019-03-25 13:00:00 -0400
categories: SQL


---

## ì¡°ì¸

- ë‘˜ ì´ìƒì˜ í…Œì´ë¸”ì„ ì—°ê²°í•˜ì—¬ ë°ì´íƒ€ë¥¼ ê²€ìƒ‰í•˜ëŠ” ë°©ë²•

### ì˜¤ë¼í´ ì¡°ì¸

| ì¢…ë¥˜          | ì„¤ëª…                                                         |
| ------------- | ------------------------------------------------------------ |
| outer join    | ì¡°ì¸ ì¡°ê±´ì— ì¼ì¹˜í•˜ëŠ” ë°ì´íƒ€ë§Œ ì¶œë ¥í•˜ëŠ” ê²½ìš°ê°€ inner joinì¸ë°(ì•„ë˜) ì¡°ê±´ì— ì¼ì¹˜í•˜ì§€ ì•Šì•„ë„ ë°ì´íƒ€ë¥¼ ì¶œë ¥í•´ì•¼ í•˜ëŠ” ê²½ìš° outer joinì„ ì‚¬ìš©í•œë‹¤(+)ëŠ” ì¡°ì¸í•  ë°ì´íƒ€ê°€ ì—†ëŠ”ìª½ whereë¬¸ ëì— í•´ì£¼ë©´ ìƒëŒ€ë°© í…Œì´ë¸”ì˜ ëª¨ë“  ë°ì´íƒ€ê°€ ì¶œë ¥ëœë‹¤ |
| self join     | ìì‹ ì˜ í…Œì´ë¸”ê³¼ ì¡°ì¸ / equi joinê³¼ ê°™ìœ¼ë‚˜ í…Œì´ë¸”ì„ ë‘ê°œë¡œ ë§Œë“¤ì–´ ì¡°ì¸í•¨from emp a, emp b |
| equi join     | ê¸°ë³¸í‚¤(primary key)ì™€ ì™¸ë¶€í‚¤(foreign key)ë¥¼ ì‚¬ìš©í•˜ì—¬ ì¡°ì¸/ë°˜ë“œì‹œ ì¼ì¹˜í• ë•Œë§Œ ì¡°íšŒfrom emp e, dept d where í…Œì´ë¸”ëª…1.ì»¬ëŸ¼ëª… = í…Œì´ë¸”ëª…2.ì»¬ëŸ¼ëª… |
| non-equi join | ë‘ í…Œì´ë¸” ê°„ ì¼ì¹˜í•˜ëŠ” ì»¬ëŸ¼ì€ ì—†ìœ¼ë‚˜ ì¡°ì¸ì´ í•„ìš”í•  ë•Œ/ë™ë“±ì—°ì‚°ì(=)ë¥¼ ì œì™¸í•œ ê´€ê³„ì—°ì‚°ì ì‚¬ìš©from emp e, dept d |

### ANSI ì¡°ì¸

- ms-sql, db2 ê°™ì€ ì˜¤ë¼í´ì´ ì•„ë‹Œ í™˜ê²½ì—ì„œë„ ì‚¬ìš© ê°€ëŠ¥í•œ í‘œì¤€í™”ëœ ì¡°ì¸
- cross join, natural join, using, outer join, self join, ...

### ğŸ£ ì‹¤ìŠµí•˜ê¸°

```sql
SELECT last_name, 
       employees.department_id 
FROM   employees, 
       departments 
WHERE  employees.department_id = departments.department_id; 
-- ë‘ í…Œì´ë¸”ì— ê³µí†µìœ¼ë¡œ ë“¤ì–´ê°„ ì»¬ëŸ¼ëª…ì€ ê·¸ëƒ¥ ì“°ë©´ ëª¨í˜¸ì„± ë•Œë¬¸ì— ì˜¤ë¥˜ê°€ ë‚œë‹¤. 
-- ë°˜ë“œì‹œ í…Œì´ë¸”ëª….ì»¬ëŸ¼ëª… ê³¼ ê°™ì€ í˜•íƒœë¡œ ì ì–´ì¤„ê²ƒ.(í…Œì´ë¸”ëª…ì´ ê¸¸ë‹¤ë©´ ë³„ì¹­ì„ ì£¼ì)
	
--myscott ê³„ì •ì—ì„œ empì™€ dept í…Œì´ë¸”ì„ ì´ìš©í•´ì„œ ì¡°ì¸, ename, job, deptno, dname, loc ì¶œë ¥
SELECT ename, 
       job, 
       emp.deptno, 
       dname, 
       loc 
FROM   emp, 
       dept 
WHERE  emp.deptno = dept.deptno; 
```



## ì œì•½ì¡°ê±´ ì„¤ì •í•˜ê¸°

- ì œì•½ì¡°ê±´ì— ëŒ€í•œ ì´ë¦„ì„ ì¤€ë‹¤. ì¶”í›„ ì—ëŸ¬ë°œìƒì‹œ ì˜¤ë¥˜ íŒŒì•…ì´ ì‰¬ì›€

- ì²˜ìŒ ìƒì„± ì‹œ ì¶”ê°€í•´ë„ ë˜ê³  í…Œì´ë¸”ì„ ë§Œë“  í›„ alter tableë¡œ ì¶”ê°€í•´ë„ ë¨

```sql
-- í˜„ì¬ í…Œì´ë¸”ì— ì§€ì •ëœ ì œì•½ì¡°ê±´ í™•ì¸
SELECT constraint_name 
FROM   user_constraints 
WHERE  table_name = 'CART'; 
-- sys_xxxx ì´ëŸ° í˜•íƒœëŠ” ì œì•½ì¡°ê±´ ì´ë¦„ì„ ì•ˆì¤¬ì„ ë•Œ ìë™ìœ¼ë¡œ ìƒì„±ë˜ëŠ” ì„ì‹œì´ë¦„ì„

-- ì œì•½ ì¡°ê±´ì„ ìƒˆë¡œ ì¶”ê°€í•˜ë ¤ë©´ ì´ë¯¸ ì„ì‹œë¡œ ì¶”ê°€ëœ ì œì•½ì¡°ê±´ì„ ì‚­ì œ í›„ ì¶”ê°€í•œë‹¤
ALTER TABLE cart 
  DROP CONSTRAINT sys_c008437; 

-- cartì˜ cart_numì„ ê¸°ë³¸í‚¤ë¡œ ì„¤ì •
ALTER TABLE cart 
  ADD CONSTRAINT pk_cart_num PRIMARY KEY(cart_num); 
		
-- cartì˜ numì„ shop.numì˜ ì™¸ë¶€í‚¤ë¡œ ì„¤ì •
ALTER TABLE cart 
  ADD CONSTRAINT fk_cart_num FOREIGN KEY(num) REFERENCES shop(num); 
		
--cartì˜ user_idì„ client.user_idì˜ ì™¸ë¶€í‚¤ë¡œ ì„¤ì •
ALTER TABLE cart 
  ADD CONSTRAINT fk_cart_user_id FOREIGN KEY(user_id) REFERENCES client(user_id) 
; 
```



## ì„œë¸Œì¿¼ë¦¬

- í•˜ë‚˜ì˜ select ë§Œìœ¼ë¡œëŠ” ì›í•˜ëŠ” ê²°ê³¼ë¥¼ ì–»ì„ ìˆ˜ ì—†ì„ ë•Œ ì„œë¸Œì¿¼ë¦¬ë¥¼ ì‹¤í–‰í•œë‹¤

```sql
SELECT select_list FROM í…Œì´ë¸”1 WHERE ì»¬ëŸ¼ëª… ì—°ì‚°ì (SELECT select_list FROM í…Œì´ë¸”2);
```

### ğŸ£ ì‹¤ìŠµí•˜ê¸°

```sql
-- ì—°ë´‰ì´ Whelenë³´ë‹¤ ë†’ì€ ì‚¬ëŒ
SELECT * 
FROM   employees 
WHERE  salary >= (SELECT salary 
                  FROM   employees 
                  WHERE  last_name = 'Whalen'); 

-- ì—°ë´‰ì´ í‰ê· ë³´ë‹¤ ë†’ì€ ì‚¬ëŒ
SELECT last_name, 
       salary 
FROM   employees 
WHERE  salary >= (SELECT Avg(salary) 
                  FROM   employees); 

-- [ë¶€ì„œë²ˆí˜¸ê°€ 100ë²ˆì¸ ì‚¬ëŒ ì¤‘ ìµœê³ ì—°ë´‰ì„ ë°›ëŠ” ì‚¬ëŒ]ê³¼ ê°™ì€ ì—°ë´‰ì„ ê°€ì§„ ì‚¬ëŒ(ë¶€ì„œë²ˆí˜¸ ìƒê´€ì—†ìŒ)ì˜ ëª…ë‹¨ êµ¬í•˜ê¸°
SELECT last_name, 
       salary 
FROM   employees 
WHERE  salary = (SELECT Max(salary) 
                 FROM   employees 
                 WHERE  department_id = 100); 

-- 100ë²ˆ ë¶€ì„œì˜ ìµœëŒ€ ì›”ê¸‰ë³´ë‹¤ ë§ì€ ëª¨ë“  ë¶€ì„œ ì •ë³´ë¥¼ ì¶œë ¥í•˜ëŠ” SQLì‘ì„±
SELECT department_id, 
       Min(salary) 
FROM   employees 
GROUP  BY department_id 
HAVING Min(salary) > (SELECT Max(salary) 
                      FROM   employees 
                      WHERE  department_id = 100); 
```



## ë³µìˆ˜í–‰ ì„œë¸Œì¿¼ë¦¬

### 1. IN

- í•´ë‹¹ ì„œë¸Œì¿¼ë¦¬ ë‚´ìš©ì— í¬í•¨ë˜ëŠ” ë°ì´íƒ€ë¥¼ ì¶œë ¥

```sql
-- ë¶€ì„œë³„ ìµœê³ ê¸‰ì—¬ì— í•´ë‹¹í•˜ëŠ” ê¸‰ì—¬ë¥¼ ë°›ëŠ” ì‚¬ì›ì˜ ì •ë³´ ì¶œë ¥
SELECT last_name, 
       salary, 
       department_id 
FROM   employees 
WHERE  salary IN (SELECT Max(salary) 
                  FROM   employees 
                  GROUP  BY department_id); 
	
-- Whalen, Fayì˜ ì—°ë´‰ê³¼ ê°™ì€ ì—°ë´‰ì„ ë°›ëŠ” ì‚¬ì› ëª©ë¡ ì¶œë ¥
SELECT last_name, 
       salary 
FROM   employees 
WHERE  salary IN (SELECT salary 
                  FROM   employees 
                  WHERE  last_name IN ( 'Whalen', 'Fay' )); 
	
-- ë¶€ì„œë³„ ì—°ë´‰ì™•
SELECT last_name, 
       salary, 
       department_id 
FROM   employees 
WHERE  ( department_id, salary ) IN (SELECT department_id, 
                                            Max(salary) 
                                     FROM   employees 
                                     GROUP  BY department_id) 
ORDER  BY department_id; 

```

### 2. ALL

- ì„œë¸Œì¿¼ë¦¬ì˜ ê²°ê³¼ ëª¨ë‘ì™€ ì¡°ê±´ì´ ë§ëŠ”ê²ƒë§Œ ì¶œë ¥

```sql
-- IT_PROGì˜ ê·¸ ì–´ë–¤ ì‚¬ì›ë³´ë‹¤ ì›”ê¸‰ì´ ì‘ì€ ì‚¬ì› ëª©ë¡ ì¶œë ¥
SELECT last_name, 
       department_id, 
       salary 
FROM   employees 
WHERE  salary < ALL (SELECT salary 
                     FROM   employees 
                     WHERE  job_id = 'IT_PROG'); 
```

### 3. ANY

- ì„œë¸Œì¿¼ë¦¬ì˜ ê²°ê³¼ ì¤‘ ì–´ëŠ í•˜ë‚˜ì™€ ì¡°ê±´ì´ ë§ì•„ë„ ì¶œë ¥

### 4. EXISTS

- ì„œë¸Œì¿¼ë¦¬ì˜ ê²°ê³¼ê°’ì´ í…Œì´ë¸”ì— ì¡´ì¬í•˜ëŠ”ì§€ ì—¬ë¶€ì— ë”°ë¼ ê²°ê³¼ë¥¼ ì¶œë ¥

```sql
-- ì„œë¸Œì¿¼ë¦¬ ë‚´ìš©ì€ ì°¸ê±°ì§“ë§Œ ì¶œë ¥í•˜ë¯€ë¡œ select ë’¤ì— ì»¬ëŸ¼ëª…ì€ ì‚¬ì‹¤ ë­ê°€ì™€ë„ ìƒê´€ì—†ë‹¤
-- IFë¬¸ ê°™ì€ê±´ê°€?
SELECT last_name, 
       department_id, 
       salary 
FROM   employees 
WHERE  EXISTS (SELECT employee_id 
               FROM   employees 
               WHERE  commission_pct IS NOT NULL); 

-- ì»¤ë¯¸ì…˜ ë°›ëŠ” ì‚¬ì›ì´ í•˜ë‚˜ë¼ë„ ìˆë‹¤ë©´ ë©”ì¸ ì¿¼ë¦¬ê°€ ì‹¤í–‰ë¨
```



ğŸ’¡[SQL ë¬¸ ê°€ë…ì„± ì¢‹ê²Œ í¬ë§·íŒ… í•´ì£¼ëŠ” ì‚¬ì´íŠ¸](
